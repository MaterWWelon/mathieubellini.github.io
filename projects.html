<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Projets — Mathieu Bellini</title>
  <link rel="stylesheet" href="assets/style.css" />
</head>
<body>
<header class="container header">
  <nav class="nav">
    <a class="brand" href="./">MB</a>
    <div class="nav-links">
      <a href="./projects.html" class="active">Projets</a>
      <a href="./cv.html">CV</a>
    </div>
  </nav>
  <h1>Projets</h1>
</header>

<main class="container">
  <div class="filters">
    <label>Année
      <select id="f-year">
        <option value="">Toutes</option>
        <option>2025</option>
      </select>
    </label>
    <label>Outils
      <input id="f-tools" placeholder="Power BI, Tableau, KNIME..." />
    </label>
  </div>

  <div id="list" class="cards"></div>
</main>

<footer class="container footer">
  <p>© <span id="y"></span> Mathieu Bellini</p>
</footer>

<script>
  document.getElementById('y').textContent = new Date().getFullYear();
  let DATA = [];
  const $year = document.getElementById('f-year');
  const $tools = document.getElementById('f-tools');
  const $list = document.getElementById('list');

  function render() {
    const y = $year.value.trim();
    const t = $tools.value.trim().toLowerCase();
    const items = DATA.filter(p =>
      (y === '' || String(p.year) === y) &&
      (t === '' || p.tools.toLowerCase().includes(t))
    );
    $list.innerHTML = items.map(p => `
      <article class="card">
        <img src="${p.thumbnail}" alt="${p.project}" />
        <div class="card-body">
          <h3>${p.project}</h3>
          <p class="meta">${p.year} · ${p.role} · ${p.tools}</p>
          <p>${p.highlights}</p>
          <p class="muted">${p.impact}</p>
          <div class="links">
            ${p.link_demo ? `<a href="${p.link_demo}" target="_blank">Démo</a>` : `<span class="muted">Démo bientôt</span>`}
            ${p.link_repo ? `<a href="${p.link_repo}" target="_blank">Repo</a>` : `<span class="muted">Repo bientôt</span>`}
          </div>
        </div>
      </article>
    `).join('');
  }

  fetch('data/projects.json').then(r => r.json()).then(d => { DATA = d; render(); });
  $year.onchange = $tools.oninput = render;
</script>
</body>
</html>
